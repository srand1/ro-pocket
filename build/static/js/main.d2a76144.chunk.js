(this["webpackJsonpro-pocket"]=this["webpackJsonpro-pocket"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),s=n(8),r=n.n(s),i=(n(13),n(14),n(3)),a=n(5),l=n(7),u=(n(15),n(0)),m=function(e){return Object(u.jsxs)("div",{children:["Unknown ",e.tag,": ",JSON.stringify(e.msg)]})},d=function(e){return Object(u.jsxs)("div",{children:["(Ignored ",e.tag,")"]})},g=function(e){if("in"!==e.msg.flow)return Object(u.jsx)(m,{tag:"flow",msg:e.msg});var t=!1;if("admin"===e.msg.from||"Server"===e.msg.fromClientType){if("admin"!==e.msg.from||"Server"!==e.msg.fromClientType)return Object(u.jsx)(m,{tag:"adminServer",msg:e.msg});t=!0}if(!e.msg.custom)return Object(u.jsx)(m,{tag:"custom",msg:e.msg});var n=JSON.parse(e.msg.custom);return"TEXT"===n.messageType?Object(u.jsx)(j,{msg:e.msg,custom:n,deleted:e.deleted}):t&&"PRESENT_NORMAL"===n.messageType?Object(u.jsx)(d,{tag:"adminServer PRESENT_NORMAL"}):t&&"DELETE"===n.messageType?Object(u.jsx)(d,{tag:"adminServer DELETE"}):"PRESENT_TEXT"===n.messageType?Object(u.jsx)(f,{msg:e.msg,custom:n}):Object(u.jsx)("div",{children:JSON.stringify(Object(l.a)(Object(l.a)({},e.msg),{},{custom:n}))})},j=function(e){var t,n,o,c;return Object(u.jsxs)("div",{className:e.deleted?"deleted":"",children:[Object(u.jsx)("img",{className:"avatar",src:"https://source.48.cn".concat(null===(t=e.custom.user)||void 0===t?void 0:t.avatar),alt:""}),(null===(n=e.custom.user)||void 0===n?void 0:n.pfUrl)?Object(u.jsx)("img",{className:"avatar-overlay",src:"https://source.48.cn".concat(null===(o=e.custom.user)||void 0===o?void 0:o.pfUrl),alt:""}):null,null===(c=e.custom.user)||void 0===c?void 0:c.nickName,Object(u.jsx)("br",{}),e.custom.text]})},f=function(e){var t,n;return Object(u.jsxs)("div",{children:[null===(t=e.custom.user)||void 0===t?void 0:t.nickName,Object(u.jsx)("br",{}),null===(n=e.custom.giftInfo)||void 0===n?void 0:n.giftName]})},b=["chatweblink01.netease.im:443"],O=function(e){var t=Object(o.useState)(null),n=Object(a.a)(t,2),c=n[0],s=n[1],r=Object(o.useState)("OFFLINE"),l=Object(a.a)(r,2),m=l[0],d=l[1],j=Object(o.useState)([]),f=Object(a.a)(j,2),O=f[0],v=f[1],h=function(e){d("ONLINE"),console.log("ONLINE",e)},x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("r",t)},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("d",t)},N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("e",t)},E=function(e){v((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))})),console.log(e)},S=new Set(O.filter((function(e){var t;return"DELETE"===(null===(t=JSON.parse(e.custom||null))||void 0===t?void 0:t.messageType)})).map((function(e){return JSON.parse(e.custom).targetId})));return Object(u.jsxs)("div",{children:[Object(u.jsx)("header",{children:e.name}),Object(u.jsx)("button",{onClick:function(){console.log(window.SDK),console.log(c),console.log(O),console.log(S)},children:"Debug"}),m,Object(u.jsx)("button",{onClick:function(){var t=window.SDK.Chatroom.getInstance({appKey:"632feff1f4c838541ab75195d1ceb3fa",isAnonymous:!0,chatroomNick:"RO",chatroomId:e.roomId,chatroomAddresses:b,onconnect:h,onwillreconnect:x,ondisconnect:p,onerror:N,onmsgs:E});s(t)},children:"Init"}),Object(u.jsx)("button",{onClick:function(){var e;c.getHistoryMsgs({timetag:null===(e=O[0])||void 0===e?void 0:e.time,done:function(e,t){e?console.log(e):(t.msgs.reverse(),v((function(e){return[].concat(Object(i.a)(t.msgs),Object(i.a)(e))})))}})},children:"Earlier"}),Object(u.jsx)("div",{children:O.map((function(e){return Object(u.jsx)(g,{msg:e,deleted:S.has(e.idClient)},e.idClient)}))})]})};var v=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(O,{roomId:"67362271",name:"Foo"})})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root")),h()}},[[17,1,2]]]);
//# sourceMappingURL=main.d2a76144.chunk.js.map