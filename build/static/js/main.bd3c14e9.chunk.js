(this["webpackJsonpro-pocket"]=this["webpackJsonpro-pocket"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(8),o=n.n(r),i=(n(13),n(14),n(7)),u=n(3),a=n(2),l=(n(15),n(0)),m=function(e){return Object(l.jsxs)("div",{children:["Unknown ",e.tag,": ",JSON.stringify(e.msg)]})},d=function(e){return Object(l.jsxs)("div",{children:["(Ignored ",e.tag,")"]})},j=function(e){var t,n,c,s;return Object(l.jsxs)("div",{className:e.deleted?"deleted":"",children:[Object(l.jsx)("img",{className:"avatar",src:"https://source.48.cn".concat(null===(t=e.user)||void 0===t?void 0:t.avatar),alt:""}),(null===(n=e.user)||void 0===n?void 0:n.pfUrl)?Object(l.jsx)("img",{className:"avatar-overlay",src:"https://source.48.cn".concat(null===(c=e.user)||void 0===c?void 0:c.pfUrl),alt:""}):null,null===(s=e.user)||void 0===s?void 0:s.nickName,Object(l.jsx)("br",{}),e.children]})},g=function(e){if("in"!==e.msg.flow)return Object(l.jsx)(m,{tag:"flow",msg:e.msg});var t=!1;if("admin"===e.msg.from||"Server"===e.msg.fromClientType){if("admin"!==e.msg.from||"Server"!==e.msg.fromClientType)return Object(l.jsx)(m,{tag:"adminServer",msg:e.msg});t=!0}if(!e.msg.custom)return Object(l.jsx)(m,{tag:"custom",msg:e.msg});var n=e.msg.custom;return"TEXT"===n.messageType?Object(l.jsx)(f,{msg:e.msg,custom:n,deleted:e.deleted}):t&&"PRESENT_NORMAL"===n.messageType?Object(l.jsx)(d,{tag:"adminServer PRESENT_NORMAL"}):t&&"PRESENT_FULLSCREEN"===n.messageType?Object(l.jsx)(d,{tag:"adminServer PRESENT_FULLSCREEN"}):t&&"RECIEVE_GIFT_EVENT"===n.messageType?Object(l.jsx)(d,{tag:"adminServer RECIEVE_GIFT_EVENT"}):t&&"DELETE"===n.messageType?Object(l.jsx)(d,{tag:"adminServer DELETE"}):"PRESENT_TEXT"===n.messageType?Object(l.jsx)(b,{msg:e.msg,custom:n}):"EXPRESSIMAGE"===n.messageType?Object(l.jsx)(O,{msg:e.msg,custom:n}):"REPLY"===n.messageType?Object(l.jsx)(v,{msg:e.msg,custom:n}):"image"===e.msg.type?Object(l.jsx)(E,{msg:e.msg,custom:n}):Object(l.jsx)("div",{children:JSON.stringify(e.msg)})},f=function(e){return Object(l.jsx)(j,{user:e.custom.user,deleted:e.deleted,children:e.custom.text})},b=function(e){var t,n;return Object(l.jsxs)(j,{user:e.custom.user,deleted:e.deleted,children:["Sent ",null===(t=e.custom.giftInfo)||void 0===t?void 0:t.giftNum,"x ",null===(n=e.custom.giftInfo)||void 0===n?void 0:n.giftName]})},O=function(e){return Object(l.jsx)(j,{user:e.custom.user,deleted:e.deleted,children:Object(l.jsx)("img",{src:e.custom.emotionRemote,alt:""})})},v=function(e){return Object(l.jsxs)(j,{user:e.custom.user,deleted:e.deleted,children:[e.custom.text,Object(l.jsxs)("blockquote",{children:[e.custom.replyName,": ",e.custom.replyText]})]})},E=function(e){return Object(l.jsx)(j,{user:e.custom.user,deleted:e.deleted,children:Object(l.jsx)("img",{src:e.msg.file.url,alt:""})})},x=["chatweblink01.netease.im:443"],p=function(e){var t=Object(c.useState)(null),n=Object(a.a)(t,2),s=n[0],r=n[1],o=Object(c.useState)("OFFLINE"),m=Object(a.a)(o,2),d=m[0],j=m[1],f=Object(c.useState)([]),b=Object(a.a)(f,2),O=b[0],v=b[1],E=function(e){j("ONLINE"),console.log("ONLINE",e)},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("r",t)},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("d",t)},N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("e",t)},T=function(e){v((function(t){var n=S(e,t,"dupNew");return[].concat(Object(u.a)(t),Object(u.a)(n))})),console.log(e)},S=function(e,t,n){var c=e.filter((function(e){return!e.resend})).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{custom:JSON.parse(e.custom||null)})})),s=new Map(t.map((function(e,t){return[e.idClient,t]}))),r=c.map((function(e,t){return[t,e,s.get(e.idClient)]})),o=r.filter((function(e){var t=Object(a.a)(e,3);t[0],t[1];return void 0!==t[2]})).map((function(e){var n=Object(a.a)(e,3),c=n[0],s=n[1],r=n[2];return[c,s,r,t[r]]}));return o.length>0&&console.log(n,o),r.filter((function(e){var t=Object(a.a)(e,3);t[0],t[1];return void 0===t[2]})).map((function(e){var t=Object(a.a)(e,3),n=(t[0],t[1]);t[2];return n}))},y=new Set(O.filter((function(e){var t;return"DELETE"===(null===(t=e.custom)||void 0===t?void 0:t.messageType)})).map((function(e){return e.custom.targetId})));return Object(l.jsxs)("div",{children:[Object(l.jsx)("header",{children:e.name}),Object(l.jsx)("button",{onClick:function(){console.log(window.SDK),console.log(s),console.log(O),console.log(y)},children:"Debug"}),d,Object(l.jsx)("button",{onClick:function(){var t=window.SDK.Chatroom.getInstance({appKey:"632feff1f4c838541ab75195d1ceb3fa",isAnonymous:!0,chatroomNick:"RO",chatroomId:e.roomId,chatroomAddresses:x,onconnect:E,onwillreconnect:p,ondisconnect:h,onerror:N,onmsgs:T});r(t)},children:"Init"}),Object(l.jsx)("button",{onClick:function(){var e;s.getHistoryMsgs({timetag:null===(e=O[0])||void 0===e?void 0:e.time,done:function(e,t){if(e)console.log(e);else{var n=Object(u.a)(t.msgs);n.reverse(),v((function(e){var t=S(n,e,"dupHist");return[].concat(Object(u.a)(t),Object(u.a)(e))}))}}})},children:"Earlier"}),Object(l.jsx)("div",{children:O.map((function(e){return Object(l.jsx)("div",{className:"each",onClick:function(){return console.log(e)},children:Object(l.jsx)(g,{msg:e,deleted:y.has(e.idClient)})},e.idClient)}))})]})};var h=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(p,{roomId:"67362271",name:"Foo"})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),r(e),o(e)}))};o.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root")),N()}},[[17,1,2]]]);
//# sourceMappingURL=main.bd3c14e9.chunk.js.map